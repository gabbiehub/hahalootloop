{% load static %}
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta charset="utf-8" />
    <title>Collector's Hub</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:ital,opsz,wght@0,14..32,100..900;1,14..32,100..900&family=Jaro:opsz@6..72&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="{% static 'css/globals.css' %}" />
    <link rel="stylesheet" href="{% static 'css/homepage/homepage.css' %}" />
    <link rel="stylesheet" href="{% static 'css/homepage/homepage-modals.css' %}" />
  </head>
  <body>
    {% csrf_token %}
    <div class="home-page">
      <div class="header">
        <input class="search-bar" type="text" placeholder="Search items..." />
        <img class="search-icon" src="{% static 'img/homepage/Search bar.png' %}" alt="Search Icon" />
        <div class="header-button">Upload Item</div>
      </div>
      <div class="banner">
        <div class="banner-content">
          <img class="gojo-figurine-banner" src="{% static 'img/homepage/gojo figurine.png' %}" alt="Gojo Figurine Banner" />
          <div class="banner-text">
            <div class="banner-title">Gojo Figurine</div>
            <div class="banner-button">Rarity: Legendary</div>
            <div class="banner-description">
              <div class="banner-subtitle">exercitation...</div>
              <p class="banner-body">
                Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et
                dolore magna aliqua. Ut enim ad minim veniam, quis nostrud
              </p>
            </div>
          </div>
        </div>
        <div class="banner-navigation">
          <div class="nav-back"><img class="nav-back-icon" src="{% static 'img/homepage/back.png' %}" alt="Navigation Back" /></div>
          <div class="nav-forward"><img class="nav-forward-icon" src="{% static 'img/homepage/forward.png' %}" alt="Navigation Forward" /></div>
        </div>
      </div>
      <div class="category-container">
        <div class="category-antiques" data-category="antiques">
          <img class="antiques-icon" src="{% static 'img/homepage/antiques.png' %}" alt="Antiques Icon" />
          <div class="category-label">Antiques</div>
        </div>
        <div class="category-figurines" data-category="figurines">
          <img class="figurines-icon" src="{% static 'img/homepage/figurine.png' %}" alt="Figurines Icon" />
          <div class="category-label">Figurines</div>
        </div>
        <div class="category-books" data-category="books">
          <img class="books-icon" src="{% static 'img/homepage/books.png' %}" alt="Books Icon" />
          <div class="category-label">Books</div>
        </div>
        <div class="category-jewelry" data-category="jewelry">
          <img class="jewelry-icon" src="{% static 'img/homepage/jewelry.png' %}" alt="Jewelry Icon" />
          <div class="category-label">Jewelry</div>
        </div>
        <div class="category-furniture" data-category="furniture">
          <img class="furniture-icon" src="{% static 'img/homepage/furniture.png' %}" alt="Furniture Icon" />
          <div class="category-label">Furniture</div>
        </div>
        <div class="category-cars" data-category="cars">
          <img class="cars-icon" src="{% static 'img/homepage/cars.png' %}" alt="Cars Icon" />
          <div class="category-label">Cars</div>
        </div>
        <div class="category-currency" data-category="currency">
          <img class="currency-icon" src="{% static 'img/homepage/currency.png' %}" alt="Currency Icon" />
          <div class="category-label">Currency</div>
        </div>
        <div class="category-toys" data-category="toys">
          <img class="toys-icon" src="{% static 'img/homepage/toys.png' %}" alt="Toys Icon" />
          <div class="category-label">Toys</div>
        </div>
      </div>
      <div class="overlap">
        <div class="section-title-recommended">Recommended</div>
        <div class="recommended-container">
          <div class="recommended-4">
            <img class="recommended-4-image" src="{% static 'img/homepage/sections/recommended 1.png' %}" alt="Recommended 4" />
            <div class="recommended-4-details">
              <img class="john-profile element" src="{% static 'img/homepage/sections/john profile.png' %}" alt="John Profile" />
              <div class="user-name text-wrapper-2">John Maigue</div>
              <div class="request-type text-wrapper">Trade Request</div>
              <p class="request-date div">01 / 01 / 2029</p>
              <p class="request-description p">
                This is the missing piece! My vintage typewriter collection won’t be complete without it.
              </p>
            </div>
            <div class="recommended-4-label">
              <div class="group">
                <div class="rectangle"></div>
                <span>Rarity: Mythic</span>
              </div>
            </div>
            <img class="recommended-4-rating" src="{% static 'img/homepage/sections/rating.png' %}" alt="Rating" />
          </div>
          <div class="recommended-4">
            <img class="recommended-4-image" src="{% static 'img/homepage/sections/recommended 2.png' %}" alt="Recommended 2" />
            <div class="recommended-4-details">
              <img class="gabriel-profile element" src="{% static 'img/homepage/sections/gabriel profile.png' %}" alt="Gabriel Profile" />
              <div class="user-name text-wrapper-2">Gabriel Imperial</div>
              <div class="request-type text-wrapper">Trade Request</div>
              <p class="request-date div">02 / 03 / 2029</p>
              <p class="request-description p">
                I’ve been hunting for this little guy forever! Anyone holding onto one of these?
              </p>
            </div>
            <div class="recommended-4-label">
              <div class="group">
                <div class="rectangle"></div>
                <span>Rarity: Rare</span>
              </div>
            </div>
            <img class="recommended-4-rating" src="{% static 'img/homepage/sections/rating.png' %}" alt="Rating" />
          </div>
          <div class="recommended-4">
            <img class="recommended-4-image" src="{% static 'img/homepage/sections/recommended 3.png' %}" alt="Recommended 3" />
            <div class="recommended-4-details">
              <img class="kathryn-profile element" src="{% static 'img/homepage/sections/kathryn profile.png' %}" alt="Kathryn Profile" />
              <div class="user-name text-wrapper-2">Kathryn Molaer</div>
              <div class="request-type text-wrapper">Collection Showcase</div>
              <p class="request-date div">12 / 31 / 2028</p>
              <p class="request-description p">
                Years of searching, countless stories within these pages—my library of treasures is finally complete!
              </p>
            </div>
            <div class="recommended-4-label">
              <div class="group">
                <div class="rectangle"></div>
                <span>Rarity: Legendary</span>
              </div>
            </div>
            <img class="recommended-4-rating" src="{% static 'img/homepage/sections/rating.png' %}" alt="Rating" />
          </div>
          <div class="recommended-4">
            <img class="recommended-4-image" src="{% static 'img/homepage/sections/recommended 4.png' %}" alt="Recommended 1" />
            <div class="recommended-4-details">
              <img class="mark-profile element" src="{% static 'img/homepage/sections/mark profile.png' %}" alt="Mark Profile" />
              <div class="user-name text-wrapper-2">Mark Africa</div>
              <div class="request-type text-wrapper">Wishlist</div>
              <p class="request-date div">04 / 05 / 2027</p>
              <p class="request-description p">
                Thinking of getting this beauty for Grandpa—nothing like the classics to bring back golden memories!
              </p>
            </div>
            <div class="recommended-4-label">
              <div class="group">
                <div class="rectangle"></div>
                <span>Rarity: Common</span>
              </div>
            </div>
            <img class="recommended-4-rating" src="{% static 'img/homepage/sections/rating.png' %}" alt="Rating" />
          </div>
          <div class="navigation-buttons">
            <div class="nav-back"><img class="nav-back-icon" src="{% static 'img/homepage/back.png' %}" alt="Navigation Back" /></div>
            <div class="nav-forward"><img class="nav-forward-icon" src="{% static 'img/homepage/forward.png' %}" alt="Navigation Forward" /></div>
          </div>
        </div>

        <div class="section-title-favorites">Favorites</div>
        <div class="favorites-container">
          <div class="favorite-1">
            <img class="favorite-1-image" src="{% static 'img/homepage/sections/favorites.png' %}" alt="Favorite 1" />
            <div class="favorite-1-details">
              <div class="favorite-1-user">
                <img class="mark-profile element" src="{% static 'img/homepage/sections/mark profile.png' %}" alt="Mark Profile" />
                <div class="favorite-1-user-name">Mark Africa</div>
              </div>
              <div class="favorite-1-status">Open for Trade</div>
              <p class="favorite-1-date">04 / 05 / 2027</p>
              <div class="favorite-1-text">
                <p class="favorite-1-description">
                  Looking to trade my Gojo Pop-Up Parade figure! Opened but in mint condition, comes with the original box.
                </p>
                <div class="favorite-1-preference">Prefer to trade</div>
              </div>
            </div>
            <div class="favorite-1-label">
              <div class="group">
                <div class="rectangle"></div>
                <span>Rarity: Rare</span>
              </div>
            </div>
            <img class="favorite-1-rating" src="{% static 'img/homepage/sections/rating.png' %}" alt="Rating" />
          </div>
          <div class="favorite-2">
            <img class="add-to-favorites" src="{% static 'img/homepage/plus.png' %}" alt="Add to Favorites" />
            <div class="favorite-2-text">Add to your <br />favorites</div>
          </div>
          <div class="navigation-buttons">
            <div class="nav-back"><img class="nav-back-icon" src="{% static 'img/homepage/back.png' %}" alt="Navigation Back" /></div>
            <div class="nav-forward"><img class="nav-forward-icon" src="{% static 'img/homepage/forward.png' %}" alt="Navigation Forward" /></div>
          </div>
        </div>

        <div class="section-title-trade-requests">Trade Requests</div>
        <div class="trade-requests">
          <div class="trade-request-1">
            <img class="trade-request-1-image" src="{% static 'img/homepage/sections/trade requests 1.png' %}" alt="Trade Request 1" />
            <div class="trade-request-1-details">
              <img class="john-profile-2 element" src="{% static 'img/homepage/sections/john profile.png' %}" alt="John Profile" />
              <div class="trade-request-1-user">John Maigue</div>
              <div class="trade-request-1-type">Trade Request</div>
              <p class="trade-request-1-date">01 / 01 / 2029</p>
              <p class="trade-request-1-description">
                Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nunc in sollicitudin nibh.
              </p>
            </div>
            <div class="trade-request-1-label">
              <div class="group">
                <div class="rectangle"></div>
                <span>Rarity: Common</span>
              </div>
            </div>
            <img class="trade-request-1-rating" src="{% static 'img/homepage/sections/rating.png' %}" alt="Rating" />
          </div>
          <div class="trade-request-2">
            <img class="trade-request-2-image" src="{% static 'img/homepage/sections/trade requests 2.png' %}" alt="Trade Request 2" />
            <div class="trade-request-2-details">
              <img class="gabriel-profile-2 element" src="{% static 'img/homepage/sections/gabriel profile.png' %}" alt="Gabriel Profile" />
              <div class="trade-request-2-user">Gabriel Imperial</div>
              <div class="trade-request-2-type">Trade Request</div>
              <p class="trade-request-2-date">02 / 03 / 2029</p>
              <p class="trade-request-2-description">
                Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nunc in sollicitudin nibh.
              </p>
            </div>
            <div class="trade-request-2-label">
              <div class="group">
                <div class="rectangle"></div>
                <span>Rarity: Legendary</span>
              </div>
            </div>
            <img class="trade-request-2-rating" src="{% static 'img/homepage/sections/rating.png' %}" alt="Rating" />
          </div>
          <div class="trade-request-3">
            <img class="trade-request-3-image" src="{% static 'img/homepage/sections/trade requests 3.png' %}" alt="Trade Request 3" />
            <div class="trade-request-3-details">
              <img class="kathryn-profile-2 element" src="{% static 'img/homepage/sections/kathryn profile.png' %}" alt="Kathryn Profile" />
              <div class="trade-request-3-user">Kathryn Molaer</div>
              <div class="trade-request-3-type">Trade Request</div>
              <p class="trade-request-3-date">12 / 31 / 2028</p>
              <p class="trade-request-3-description">
                Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nunc in sollicitudin nibh.
              </p>
            </div>
            <div class="trade-request-3-label">
              <div class="group">
                <div class="rectangle"></div>
                <span>Rarity: Mythic</span>
              </div>
            </div>
            <img class="trade-request-3-rating" src="{% static 'img/homepage/sections/rating.png' %}" alt="Rating" />
          </div>
          <div class="trade-request-4">
            <img class="trade-request-4-image" src="{% static 'img/homepage/sections/trade requests 4.png' %}" alt="Trade Request 4" />
            <div class="trade-request-4-details">
              <img class="mark-profile-2 element" src="{% static 'img/homepage/sections/mark profile.png' %}" alt="Mark Profile" />
              <div class="trade-request-4-user">Mark Africa</div>
              <div class="trade-request-4-type">Trade Request</div>
              <p class="trade-request-4-date">04 / 05 / 2027</p>
              <p class="trade-request-4-description">
                Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nunc in sollicitudin nibh.
              </p>
            </div>
            <div class="trade-request-4-label">
              <div class="group">
                <div class="rectangle"></div>
                <span>Rarity: Rare</span>
              </div>
            </div>
            <img class="trade-request-4-rating" src="{% static 'img/homepage/sections/rating.png' %}" alt="Rating" />
          </div>
          <div class="navigation-buttons">
            <div class="nav-back"><img class="nav-back-icon" src="{% static 'img/homepage/back.png' %}" alt="Navigation Back" /></div>
            <div class="nav-forward"><img class="nav-forward-icon" src="{% static 'img/homepage/forward.png' %}" alt="Navigation Forward" /></div>
          </div>
        </div>

        <div class="section-title-showcases">Collection Showcases</div>
        <div class="showcase-group">
          <div class="showcase-1">
            <img class="showcase-1-image" src="{% static 'img/homepage/sections/collection showcase 1.png' %}" alt="Showcase 1" />
            <div class="showcase-1-details">
              <img class="john-profile-3 element" src="{% static 'img/homepage/sections/john profile.png' %}" alt="John Profile" />
              <div class="showcase-1-user">John Maigue</div>
              <div class="showcase-1-type">Showcase</div>
              <p class="showcase-1-date">01 / 01 / 2029</p>
              <p class="showcase-1-description">
                Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nunc in sollicitudin nibh.
              </p>
            </div>
            <div class="showcase-1-label">
              <div class="group">
                <div class="rectangle"></div>
                <span>Rarity: Legendary</span>
              </div>
            </div>
            <img class="showcase-1-rating" src="{% static 'img/homepage/sections/rating.png' %}" alt="Rating" />
          </div>
          <div class="showcase-2">
            <img class="showcase-2-image" src="{% static 'img/homepage/sections/collection showcase 2.png' %}" alt="Showcase 2" />
            <div class="showcase-2-details">
              <img class="gabriel-profile-3 element" src="{% static 'img/homepage/sections/gabriel profile.png' %}" alt="Gabriel Profile" />
              <div class="showcase-2-user">Gabriel Imperial</div>
              <div class="showcase-2-type">Showcase</div>
              <p class="showcase-2-date">02 / 03 / 2029</p>
              <p class="showcase-2-description">
                Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nunc in sollicitudin nibh.
              </p>
            </div>
            <div class="showcase-2-label">
              <div class="group">
                <div class="rectangle"></div>
                <span>Rarity: Common</span>
              </div>
            </div>
            <img class="showcase-2-rating" src="{% static 'img/homepage/sections/rating.png' %}" alt="Rating" />
          </div>
          <div class="showcase-3">
            <img class="showcase-3-image" src="{% static 'img/homepage/sections/collection showcase 3.png' %}" alt="Showcase 3" />
            <div class="showcase-3-details">
              <img class="kathryn-profile-3 element" src="{% static 'img/homepage/sections/kathryn profile.png' %}" alt="Kathryn Profile" />
              <div class="showcase-3-user">Kathryn Molaer</div>
              <div class="showcase-3-type">Showcase</div>
              <p class="showcase-3-date">12 / 31 / 2028</p>
              <p class="showcase-3-description">
                Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nunc in sollicitudin nibh.
              </p>
            </div>
            <div class="showcase-3-label">
              <div class="group">
                <div class="rectangle"></div>
                <span>Rarity: Mythic</span>
              </div>
            </div>
            <img class="showcase-3-rating" src="{% static 'img/homepage/sections/rating.png' %}" alt="Rating" />
          </div>
          <div class="showcase-4">
            <img class="showcase-4-image" src="{% static 'img/homepage/sections/collection showcase 4.png' %}" alt="Showcase 4" />
            <div class="showcase-4-details">
              <img class="mark-profile-3 element" src="{% static 'img/homepage/sections/mark profile.png' %}" alt="Mark Profile" />
              <div class="showcase-4-user">Mark Africa</div>
              <div class="showcase-4-type">Showcase</div>
              <p class="showcase-4-date">04 / 05 / 2027</p>
              <p class="showcase-4-description">
                Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nunc in sollicitudin nibh.
              </p>
            </div>
            <div class="showcase-4-label">
              <div class="group">
                <div class="rectangle"></div>
                <span>Rarity: Rare</span>
              </div>
            </div>
            <img class="showcase-4-rating" src="{% static 'img/homepage/sections/rating-3.png' %}" alt="Rating" />
          </div>
          <div class="navigation-buttons">
            <div class="nav-back"><img class="nav-back-icon" src="{% static 'img/homepage/back.png' %}" alt="Navigation Back" /></div>
            <div class="nav-forward"><img class="nav-forward-icon" src="{% static 'img/homepage/forward.png' %}" alt="Navigation Forward" /></div>
          </div>
        </div>
      </div>

      <!-- Sidebar -->
      <div class="sidebar">
        <div class="sidebar-home">
          <div class="sidebar-highlight">
            <img class="sidebar-highlight-icon" src="{% static 'img/homepage/nav bar select.png' %}" alt="Highlight" />
          </div>
          <img class="home-icon" src="{% static 'img/homepage/Home.png' %}" alt="Home Icon" />
        </div>
        <img class="chat-icon" src="{% static 'img/homepage/chat room.png' %}" alt="Chat" data-modal="messageModal" />
        <img class="settings-icon" src="{% static 'img/homepage/Settings.png' %}" alt="Settings Icon" />
        <img class="notifications-icon" src="{% static 'img/homepage/Notif.png' %}" alt="Notifications Icon" />
        <img class="user-profile" src="{% static 'img/homepage/Profile.png' %}" alt="User Profile" />
      </div>
      <img class="logo" src="{% static 'img/logo 2.png' %}" alt="Logo" />

      <!-- Message Modal -->
      <div class="modal" id="messageModal">
        <div class="modal-content message">
          <img class="close-window" src="{% static 'img/close-window.png' %}" alt="Close" />
          <div class="text-wrapper">Chat</div>
          <div class="sidebar">
            <div class="search-bar">
              <input type="text" placeholder="Search..." style="width: 100%; height: 100%; padding: 0.5rem;">
            </div>
            <div class="div">Recent Conversations</div>
            <div class="chat-list">
              <div class="chat-item active">
                <img class="chat-pfp" src="{% static 'img/homepage modals/pfp 1.png' %}" alt="Profile picture" />
                <div class="chat-info">
                  <div class="chat-name">KatsuraDa</div>
                  <div class="chat-preview">Yes, nabili ko sila dun mismo sa...</div>
                </div>
                <div class="chat-time">8:57 pm</div>
              </div>
              <div class="chat-item">
                <img class="chat-pfp" src="{% static 'img/homepage modals/pfp 2.png' %}" alt="Profile picture" />
                <div class="chat-info">
                  <div class="chat-name">GujuSinsi</div>
                  <div class="chat-preview">You: hoyy hahah di naman fake y...</div>
                </div>
                <div class="chat-time">5:00 pm</div>
              </div>
              <div class="chat-item">
                <img class="chat-pfp" src="{% static 'img/homepage modals/pfp 3.png' %}" alt="Profile picture" />
                <div class="chat-info">
                  <div class="chat-name">FindingDory</div>
                  <div class="chat-preview unread">Bakit di mo ko pinapansin?</div>
                </div>
                <div class="chat-time">1:17 pm</div>
                <div class="chat-unread"></div>
              </div>
              <div class="chat-item">
                <img class="chat-pfp" src="{% static 'img/homepage modals/pfp 4.png' %}" alt="Profile picture" />
                <div class="chat-info">
                  <div class="chat-name">CollectorCat</div>
                  <div class="chat-preview">siamese yung pinakauna kong n...</div>
                </div>
                <div class="chat-time">1:10 pm</div>
              </div>
              <div class="chat-item">
                <img class="chat-pfp" src="{% static 'img/homepage modals/pfp 5.png' %}" alt="Profile picture" />
                <div class="chat-info">
                  <div class="chat-name">HaikyuuLover</div>
                  <div class="chat-preview unread">Hello? uso po mag-reply?! asan...</div>
                </div>
                <div class="chat-time">12:00 pm</div>
                <div class="chat-unread"></div>
              </div>
              <div class="chat-item">
                <img class="chat-pfp" src="{% static 'img/homepage modals/pfp 6.png' %}" alt="Profile picture" />
                <div class="chat-info">
                  <div class="chat-name">Coraline</div>
                  <div class="chat-preview">You: nakakainggit gusto ko rin n...</div>
                </div>
                <div class="chat-time">8:00 am</div>
              </div>
              <div class="chat-item">
                <img class="chat-pfp" src="{% static 'img/homepage modals/pfp 7.png' %}" alt="Profile picture" />
                <div class="chat-info">
                  <div class="chat-name">akosiblueyyy</div>
                  <div class="chat-preview">You: ngl ts pmo iykyk</div>
                </div>
                <div class="chat-time">Feb. 14</div>
              </div>
              <div class="chat-item">
                <img class="chat-pfp" src="{% static 'img/homepage modals/pfp 2.png' %}" alt="Profile picture" />
                <div class="chat-info">
                  <div class="chat-name">gagagagagga</div>
                  <div class="chat-preview">siamese yung pinakauna kong n...</div>
                </div>
                <div class="chat-time">1:10 pm</div>
              </div>
              <div class="chat-item">
                <img class="chat-pfp" src="{% static 'img/homepage modals/pfp 1.png' %}" alt="Profile picture" />
                <div class="chat-info">
                  <div class="chat-name">HaikyuuLover</div>
                  <div class="chat-preview unread">Hello? uso po mag-reply?! asan...</div>
                </div>
                <div class="chat-time">12:00 pm</div>
                <div class="chat-unread"></div>
              </div>
              <div class="chat-item">
                <img class="chat-pfp" src="{% static 'img/homepage modals/pfp 4.png' %}" alt="Profile picture" />
                <div class="chat-info">
                  <div class="chat-name">Coraline</div>
                  <div class="chat-preview">You: nakakainggit gusto ko rin n...</div>
                </div>
                <div class="chat-time">8:00 am</div>
              </div>
              <div class="chat-item">
                <img class="chat-pfp" src="{% static 'img/homepage modals/pfp 6.png' %}" alt="Profile picture" />
                <div class="chat-info">
                  <div class="chat-name">akosiblueyyy</div>
                  <div class="chat-preview">You: ngl ts pmo iykyk</div>
                </div>
                <div class="chat-time">Feb. 14</div>
              </div>
            </div>
          </div>
          <div class="chat-area">
            <div class="sino-kausap">
              <div class="overlap-6">
                <img class="pfp-3" src="{% static 'img/homepage modals/pfp 2.png' %}" alt="Profile" />
                <div class="text-wrapper-6">KatsuraDa</div>
                <div class="text-wrapper-12">@zurajanai</div>
                <div class="group-10">
                  <div class="overlap-14">
                    <div class="text-wrapper-13">View profile</div>
                  </div>
                </div>
              </div>
            </div>
            <div class="message-opssen">
              <div class="chat-bubble other-user">
                <p class="hey-i-saw-your-2">
                  Hey! I saw your collection. Ganda ng figurines mo ah. Matagal ka na nagko-collect?
                </p>
                <span class="message-time">06:00 PM</span>
              </div>
              <div class="chat-bubble current-user">
                <p class="hi-yes-medyo-matagal">
                  Hi! Yes, medyo matagal na rin. Since 2020 pa ako nagko-collect ng mga figurines ng Jujutsu Kaisen characters
                </p>
                <span class="message-time">06:01 PM</span>
              </div>
              <div class="chat-bubble other-user">
                <p class="p">Si gojo ba favorite mo? dami mong gojo eh</p>
                <span class="message-time">06:02 PM</span>
              </div>
              <div class="chat-bubble current-user">
                <p class="text-wrapper-2">Oo, halata na nga eh HAHA</p>
                <span class="message-time">06:03 PM</span>
              </div>
              <div class="chat-bubble other-user">
                <p class="text-wrapper-3">si gojo rin favorite ko</p>
                <span class="message-time">06:04 PM</span>
              </div>
              <div class="chat-bubble other-user">
                <p class="text-wrapper-4">madalas ka ba bumibili online?</p>
                <span class="message-time">06:04 PM</span>
              </div>
              <div class="chat-bubble current-user">
                <p class="text-wrapper-5">Minsan sa online, pero minsan sa mga malls din kung meron</p>
                <span class="message-time">06:04 PM</span>
              </div>
              <div class="chat-bubble other-user">
                <p class="text-wrapper-11">Ahh talaga ba? Nice</p>
                <span class="message-time">06:04 PM</span>
              </div>
              <div class="chat-bubble other-user">
                <p class="kita-ko-nga-meron-ka">
                  kita ko nga meron ka rin mga sanrio characters. galing ba yon dun sa mga blind boxes?
                </p>
                <span class="message-time">06:04 PM</span>
              </div>
              <div class="chat-bubble current-user">
                <p class="text-wrapper-11">Yes, nabili ko sila dun mismo sa miniso. marami dun</p>
                <span class="message-time">06:04 PM</span>
              </div>
            </div>
            <div class="overlap-15">
              <div class="overlap-16">
                <input type="text" class="text-wrapper-14" placeholder="Write your message" />
                <img class="attach" src="{% static 'img/homepage modals/attach.png' %}" alt="Attach" />
                <img class="send-icon" src="{% static 'img/homepage modals/send.png' %}" alt="Send" />
              </div>
            </div>
          </div>
        </div>
      </div>
    
      <!-- Basic Information Modal -->
      <div class="modal" id="basicInfoModal">
        <div class="modal-content item-upload-page">
          <div class="overlap">
            <div class="rectangle"></div>
            <div class="text-wrapper">Next</div>
            <img class="up" src="{% static 'img/up.png' %}" alt="Up Arrow" />
          </div>
          <div class="upload-file-group">
            <div class="overlap-group" id="dropZone">
              <img class="pfp" src="{% static 'img/pfp-8-1.png' %}" alt="Upload Icon" />
              <div class="div">
                <p class="drag-drop-to-upload">Drag & drop to upload</p>
                <div class="text-wrapper-2">Files supported: JPG, PNG</div>
              </div>
              <div class="text-wrapper-3">or</div>
              <div class="div-wrapper">
                <input type="file" id="fileInput" class="hidden-file-input" accept="image/jpeg,image/png" />
                <div class="text-wrapper-4" onclick="document.getElementById('fileInput').click()">Upload File</div>
              </div>
            </div>
          </div>
          <img class="line" src="{% static 'img/line-9.svg' %}" alt="Line" />
          <img class="img" src="{% static 'img/line-10.svg' %}" alt="Line" />
          <img class="line-2" src="{% static 'img/line-11.svg' %}" alt="Line" />
          <img class="close-window" id="closeBasicInfoModal" src="{% static 'img/close-window.png' %}" alt="Close" />
          <div class="text-wrapper-5">Basic Information</div>
          <div class="text-wrapper-6">Detailed Information</div>
          <div class="text-wrapper-7">Preview and Uploading</div>
          <div class="text-wrapper-8">Basic Information</div>
          <div class="text-wrapper-9">Name</div>
          <div class="text-wrapper-10">Description</div>
          <div class="text-wrapper-11">Item Type</div>
          <p class="p">Create shelf or add to existing</p>
          <div class="text-wrapper-12">Tradability</div>
          <div class="rectangle-2">
            <input type="text" id="itemName" placeholder="Enter item name" />
          </div>
          <div class="rectangle-3">
            <textarea id="itemDescription" placeholder="Describe your item"></textarea>
          </div>
          <div class="dropdown-menu" id="itemTypeDropdown">
            <div class="text-wrapper-13">Select type</div>
            <img class="vector" src="{% static 'img/dropdown.png' %}" alt="Dropdown Arrow" />
            <div class="dropdown-options" style="display: none;">
              <div class="option" data-value="Antiques">Antiques</div>
              <div class="option" data-value="Figurines">Figurines</div>
              <div class="option" data-value="Books">Books</div>
              <div class="option" data-value="Jewelry">Jewelry</div>
              <div class="option" data-value="Furniture">Furniture</div>
              <div class="option" data-value="Cars">Cars</div>
              <div class="option" data-value="Currency">Currency</div>
              <div class="option" data-value="Toys">Toys</div>
            </div>
          </div>
          <div class="dropdown-menu-2" id="shelfDropdown">
            <div class="text-wrapper-13">Select type</div>
            <img class="vector" src="{% static 'img/dropdown.png' %}" alt="Dropdown Arrow" />
            <div class="dropdown-options" style="display: none;">
              <div class="option" data-value="Create New">Create New</div>
              <div class="option" data-value="Existing Shelf 1">Existing Shelf 1</div>
              <div class="option" data-value="Existing Shelf 2">Existing Shelf 2</div>
            </div>
          </div>
          <div class="component" id="tradabilityToggle">
            <div class="overlap-2"><div class="text-wrapper-14">Enabled</div></div>
            <div class="overlap-3"><div class="text-wrapper-15">Disabled</div></div>
          </div>
          <div class="text-wrapper-16">Upload Photo</div>
        </div>
      </div>

      <!-- Detailed Information Modal -->
      <div class="modal" id="detailedInfoModal" style="display: none;">
        <div class="modal-content item-upload-page">
          <div class="overlap">
            <div class="rectangle"></div>
            <div class="text-wrapper">Next</div>
            <img class="up" src="{% static 'img/up.png' %}" alt="Forward Arrow" />
          </div>
          <div class="overlap-group">
            <div class="rectangle"></div>
            <div class="div">Back</div>
            <img class="img" src="{% static 'img/back.png' %}" alt="Back Arrow" />
          </div>
          <img class="line" src="{% static 'img/line-10.svg' %}" alt="Line" />
          <img class="line-2" src="{% static 'img/line-9.svg' %}" alt="Yellow Line" />
          <img class="line-3" src="{% static 'img/line-11.svg' %}" alt="Line" />
          <img class="close-window" id="closeDetailedInfoModal" src="{% static 'img/close-window.png' %}" alt="Close" />
          <div class="text-wrapper-2">Basic Information</div>
          <div class="text-wrapper-3">Detailed Information</div>
          <div class="text-wrapper-4">Preview and Uploading</div>
          <div class="text-wrapper-5">More Details</div>
          <img class="item-image-area" id="detailedImage" src="{% static 'img/item-image-area.png' %}" alt="Item Image" />
          <div class="fieldsss">
            <div class="text-wrapper-6">Date Acquired</div>
            <div class="text-wrapper-7">Other Notes</div>
            <div class="text-wrapper-9">Dimensions</div>
            <div class="text-wrapper-10">Weight</div>
            <div class="text-wrapper-11">Condition</div>
            <div class="overlap-2">
              <img class="vector" src="{% static 'img/dropdown.png' %}" alt="Dropdown Arrow" />
              <input type="text" id="dateAcquired" class="text-wrapper-12" placeholder="mm/dd/yyyy" />
            </div>
            <div class="rectangle-2">
              <input type="text" id="dimensions" placeholder="Enter dimensions" />
            </div>
            <div class="rectangle-3">
              <input type="text" id="weight" placeholder="Enter weight" />
            </div>
            <div class="dropdown-menu" id="conditionDropdown">
              <div class="text-wrapper-13">Select type</div>
              <img class="vector-2" src="{% static 'img/dropdown.png' %}" alt="Dropdown Arrow" />
              <div class="dropdown-options" style="display: none;">
                <div class="option" data-value="New">New</div>
                <div class="option" data-value="Like New">Like New</div>
                <div class="option" data-value="Used">Used</div>
                <div class="option" data-value="Damaged">Damaged</div>
              </div>
            </div>
            <div class="rectangle-4">
              <textarea id="otherNotes" placeholder="Enter notes"></textarea>
            </div>
          </div>
        </div>
      </div>

      <!-- Preview and Uploading Modal -->
      <div class="modal" id="previewModal" style="display: none;">
        <div class="modal-content item-upload-page">
          <div class="overlap">
            <div class="rectangle"></div>
            <div class="text-wrapper">Upload</div>
            <img class="up" src="{% static 'img/upload.png' %}" alt="Upload Arrow" />
          </div>
          <div class="overlap-group">
            <div class="rectangle"></div>
            <div class="div">Back</div>
            <img class="img" src="{% static 'img/up.png' %}" alt="Back Arrow" />
          </div>
          <img class="line" src="{% static 'img/line-11.svg' %}" alt="Line" />
          <img class="line-2" src="{% static 'img/line-10.svg' %}" alt="Line" />
          <img class="line-3" src="{% static 'img/line-9.svg' %}" alt="Line" />
          <img class="close-window" id="closePreviewModal" src="{% static 'img/close-window.png' %}" alt="Close" />
          <div class="text-wrapper-2">Basic Information</div>
          <div class="text-wrapper-3">Detailed Information</div>
          <div class="text-wrapper-4">Preview and Uploading</div>
          <img class="item-image-area" id="previewImage" src="{% static 'img/item-image-area.png' %}" alt="Item Image" />
          <div class="preview-details">
            <h3 id="previewName">Jujutsu Kaisen Satoru Gojo Past Edition</h3>
            <p class="text-wrapper-22" id="previewAuthor">Author Name</p>
            <div class="rating-section">
              <img class="star" src="{% static 'img/star.png' %}" alt="Star" />
              <span class="text-wrapper-20" id="previewRating">4.5</span>
            </div>
            <p class="text-wrapper-7" id="previewTradability">Available for trade</p>
            <hr class="line-4" />
            <h5 class="text-wrapper-18">Description:</h5>
            <p class="p" id="previewDescription">Lorem ipsum dolor sit amet...</p>
            <h5 class="text-wrapper-18">Notes:</h5>
            <p class="p" id="previewNotes">No additional notes</p>
            <div class="detail-row">
              <p class="year-acquired"><span class="span">Year Acquired:</span></p>
              <span class="text-wrapper-12" id="previewYear">2024</span>
            </div>
            <div class="detail-row">
              <p class="text-wrapper-13">Dimensions:</p>
              <span class="text-wrapper-12" id="previewDimensions">6in x 4in</span>
            </div>
            <div class="detail-row">
              <p class="weight"><span class="span">Weight:</span></p>
              <span class="text-wrapper-12" id="previewWeight">357grams</span>
            </div>
            <div class="detail-row">
              <p class="text-wrapper-14">Condition:</p>
              <span class="text-wrapper-12" id="previewCondition">No Damage</span>
            </div>
            <div class="overlap-3">
              <div class="rectangle contact-owner"></div>
              <div class="text-wrapper-6">Contact Owner</div>
            </div>
            <hr class="line-5" />
            <h5 class="text-wrapper-8">Comments</h5>
            <div class="comment-section">
              <div class="comment-count">
                <div class="text-wrapper-21" id="commentCount">0</div>
              </div>
              <input type="text" class="comment-input" id="commentInput" placeholder="Add a comment..." />
              <div class="div-wrapper">
                <div class="text-wrapper-4 submit-comment">Submit</div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <script>
      document.addEventListener('DOMContentLoaded', () => {
        // Category click navigation
        const categoryItems = document.querySelectorAll('.category-container > div');
        categoryItems.forEach(item => {
          item.style.cursor = 'pointer';
          item.addEventListener('click', () => {
            const category = item.getAttribute('data-category');
            if (category) {
              window.location.href = `/category-results/${category}/`;
            }
          });
        });

        // Chat Modal Functionality
        const chatModal = document.getElementById('messageModal');
        const openChatButton = document.querySelector('.chat-icon');
        const closeChatButton = chatModal.querySelector('.close-window');
        const sendButton = chatModal.querySelector('.send-icon');
        const chatInput = chatModal.querySelector('.chat-input input');
        const chatMessages = chatModal.querySelector('.chat-messages');

        if (openChatButton && chatModal && closeChatButton) {
          openChatButton.style.cursor = 'pointer';
          openChatButton.addEventListener('click', () => {
            chatModal.style.display = 'flex';
            document.body.style.overflow = 'hidden';
            chatInput.focus();
          });

          closeChatButton.style.cursor = 'pointer';
          closeChatButton.addEventListener('click', () => {
            chatModal.style.display = 'none';
            document.body.style.overflow = '';
          });

          chatModal.addEventListener('click', (e) => {
            if (e.target === chatModal) {
              chatModal.style.display = 'none';
              document.body.style.overflow = '';
            }
          });

          if (sendButton && chatInput && chatMessages) {
            sendButton.style.cursor = 'pointer';
            sendButton.addEventListener('click', () => {
              const message = chatInput.value.trim();
              if (message) {
                const messageDiv = document.createElement('div');
                messageDiv.classList.add('chat-bubble', 'current-user');
                messageDiv.innerHTML = `<p>${message}</p><span class="message-time">${new Date().toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' })}</span>`;
                chatMessages.appendChild(messageDiv);
                chatInput.value = '';
                chatMessages.scrollTop = chatMessages.scrollHeight;
              }
            });

            chatInput.addEventListener('keypress', (e) => {
              if (e.key === 'Enter') {
                sendButton.click();
              }
            });
          }
        }

        // Get DOM elements for upload modals
        const uploadButton = document.querySelector('.header-button');
        const basicInfoModal = document.getElementById('basicInfoModal');
        const detailedInfoModal = document.getElementById('detailedInfoModal');
        const previewModal = document.getElementById('previewModal');
        const closeBasicInfoModal = document.getElementById('closeBasicInfoModal');
        const closeDetailedInfoModal = document.getElementById('closeDetailedInfoModal');
        const closePreviewModal = document.getElementById('closePreviewModal');
        const dropZone = document.getElementById('dropZone');
        const fileInput = document.getElementById('fileInput');
        const itemTypeDropdown = document.getElementById('itemTypeDropdown');
        const shelfDropdown = document.getElementById('shelfDropdown');
        const tradabilityToggle = document.getElementById('tradabilityToggle');
        const conditionDropdown = document.getElementById('conditionDropdown');
        let tradability = 'Enabled';
        let currentItemId = null;
        let itemData = {};

        // Function to get CSRF token
        function getCsrfToken() {
          const tokenElement = document.querySelector('input[name="csrfmiddlewaretoken"]');
          if (!tokenElement) {
            console.error('CSRF token element not found.');
            return '';
          }
          return tokenElement.value;
        }

        // Open basic info modal
        if (uploadButton && basicInfoModal) {
          uploadButton.style.cursor = 'pointer';
          uploadButton.addEventListener('click', (event) => {
            event.preventDefault();
            basicInfoModal.style.display = 'flex';
            const itemName = document.getElementById('itemName');
            if (itemName) itemName.focus();
          });
        }

        // Close modals
        [closeBasicInfoModal, closeDetailedInfoModal, closePreviewModal].forEach((closeButton) => {
          if (closeButton) {
            closeButton.style.cursor = 'pointer';
            closeButton.addEventListener('click', () => {
              if (basicInfoModal) basicInfoModal.style.display = 'none';
              if (detailedInfoModal) detailedInfoModal.style.display = 'none';
              if (previewModal) previewModal.style.display = 'none';
              resetForm();
            });
          }
        });

        window.addEventListener('click', (event) => {
          if (event.target === basicInfoModal || event.target === detailedInfoModal || event.target === previewModal) {
            if (basicInfoModal) basicInfoModal.style.display = 'none';
            if (detailedInfoModal) detailedInfoModal.style.display = 'none';
            if (previewModal) previewModal.style.display = 'none';
            resetForm();
          }
        });

        // Drag and drop file upload (Basic Info)
        if (dropZone && fileInput) {
          dropZone.addEventListener('dragover', (event) => {
            event.preventDefault();
            dropZone.style.borderColor = '#003566';
          });

          dropZone.addEventListener('dragleave', (event) => {
            event.preventDefault();
            dropZone.style.borderColor = '#003566';
          });

          dropZone.addEventListener('drop', (event) => {
            event.preventDefault();
            dropZone.style.borderColor = '#003566';
            const files = event.dataTransfer.files;
            if (files.length > 0) {
              fileInput.files = files;
              handleFileUpload(files[0], dropZone);
            }
          });

          fileInput.addEventListener('change', (event) => {
            const files = event.target.files;
            if (files.length > 0) {
              handleFileUpload(files[0], dropZone);
            }
          });
        }

        function handleFileUpload(file, dropZoneElement) {
          const validwherever = new FileReader();
          const validTypes = ['image/jpeg', 'image/png'];
          if (!validTypes.includes(file.type)) {
            alert('Please upload a JPG or PNG file.');
            return;
          }
          const reader = new FileReader();
          reader.onload = (e) => {
            dropZoneElement.style.backgroundImage = `url(${e.target.result})`;
            dropZoneElement.style.backgroundSize = 'cover';
            dropZoneElement.style.backgroundPosition = 'center';
            const pfp = dropZoneElement.querySelector('.pfp');
            const div = dropZoneElement.querySelector('.div');
            const textWrapper3 = dropZoneElement.querySelector('.text-wrapper-3');
            const divWrapper = dropZoneElement.querySelector('.div-wrapper');
            if (pfp) pfp.style.display = 'none';
            if (div) div.style.display = 'none';
            if (textWrapper3) textWrapper3.style.display = 'none';
            if (divWrapper) divWrapper.style.display = 'none';
          };
          reader.readAsDataURL(file);
        }

        // Dropdown functionality
        const dropdowns = [itemTypeDropdown, shelfDropdown, conditionDropdown].filter((d) => d);
        dropdowns.forEach((dropdown) => {
          dropdown.addEventListener('click', (event) => {
            event.stopPropagation();
            const options = dropdown.querySelector('.dropdown-options');
            if (options) {
              options.style.display = options.style.display === 'block' ? 'none' : 'block';
            }
          });

          const options = dropdown.querySelectorAll('.dropdown-options .option');
          options.forEach((option) => {
            option.addEventListener('click', (e) => {
              e.stopPropagation();
              const textWrapper = dropdown.querySelector('.text-wrapper-13');
              if (textWrapper) {
                textWrapper.textContent = e.target.textContent;
              }
              const optionsContainer = e.target.closest('.dropdown-options');
              if (optionsContainer) {
                optionsContainer.style.display = 'none';
              }
            });
          });
        });

        window.addEventListener('click', () => {
          document.querySelectorAll('.dropdown-options').forEach((options) => {
            options.style.display = 'none';
          });
        });

        // Tradability toggle
        if (tradabilityToggle) {
          tradabilityToggle.style.cursor = 'pointer';
          tradabilityToggle.addEventListener('click', () => {
            const overlap2 = tradabilityToggle.querySelector('.overlap-2');
            const overlap3 = tradabilityToggle.querySelector('.overlap-3');
            const text14 = overlap2?.querySelector('.text-wrapper-14');
            const text15 = overlap3?.querySelector('.text-wrapper-15');

            if (tradability === 'Enabled') {
              if (overlap2) overlap2.style.backgroundColor = '#ffffff';
              if (overlap3) overlap3.style.backgroundColor = '#ffd60a';
              if (text14) text14.style.color = '#b9b9b9';
              if (text15) text15.style.color = '#003566';
              tradability = 'Disabled';
            } else {
              if (overlap2) overlap2.style.backgroundColor = '#ffd60a';
              if (overlap3) overlap3.style.backgroundColor = '#ffffff';
              if (text14) text14.style.color = '#003566';
              if (text15) text15.style.color = '#b9b9b9';
              tradability = 'Enabled';
            }
          });
        }

        // Basic Info submission
        const basicNextButton = document.querySelector('#basicInfoModal .overlap');
        if (basicNextButton) {
          basicNextButton.style.cursor = 'pointer';
          basicNextButton.addEventListener('click', async (event) => {
            event.preventDefault();

            const itemName = document.getElementById('itemName');
            const itemDescription = document.getElementById('itemDescription');
            const itemType = itemTypeDropdown?.querySelector('.text-wrapper-13')?.textContent || 'Select type';
            const shelf = shelfDropdown?.querySelector('.text-wrapper-13')?.textContent || 'Select type';

            if (!itemName?.value.trim()) {
              alert('Please enter the item name.');
              return;
            }
            if (!itemDescription?.value.trim()) {
              alert('Please enter the item description.');
              return;
            }
            if (itemType === 'Select type') {
              alert('Please select an item type.');
              return;
            }
            if (shelf === 'Select type') {
              alert('Please select a shelf.');
              return;
            }
            if (!fileInput?.files[0]) {
              alert('Please upload an item image.');
              return;
            }

            itemData = {
              name: itemName.value.trim(),
              description: itemDescription.value.trim(),
              itemType,
              shelf,
              tradability,
              file: fileInput.files[0],
            };

            const formData = new FormData();
            formData.append('name', itemData.name);
            formData.append('description', itemData.description);
            formData.append('itemType', itemData.itemType);
            formData.append('shelf', itemData.shelf);
            formData.append('tradability', itemData.tradability);
            formData.append('file', itemData.file);

            try {
              const response = await fetch('/upload-item/', {
                method: 'POST',
                body: formData,
                headers: {
                  'X-CSRFToken': getCsrfToken(),
                },
              });
              const result = await response.json();
              if (result.status === 'success') {
                currentItemId = result.item_id;
                if (basicInfoModal) basicInfoModal.style.display = 'none';
                if (detailedInfoModal) detailedInfoModal.style.display = 'flex';
                const dateAcquired = document.getElementById('dateAcquired');
                if (dateAcquired) dateAcquired.focus();

                if (itemData.file) {
                  const detailedImage = document.getElementById('detailedImage');
                  if (detailedImage) {
                    const reader = new FileReader();
                    reader.onload = (e) => {
                      detailedImage.src = e.target.result;
                    };
                    reader.readAsDataURL(itemData.file);
                  }
                }
              } else {
                alert('Error: ' + result.message);
              }
            } catch (error) {
              console.error('Error uploading item:', error);
              alert('An error occurred while uploading the item.');
            }
          });
        }

        // Detailed Info submission
        const detailedNextButton = document.querySelector('#detailedInfoModal .overlap');
        if (detailedNextButton) {
          detailedNextButton.style.cursor = 'pointer';
          detailedNextButton.addEventListener('click', async (event) => {
            event.preventDefault();

            const dateAcquired = document.getElementById('dateAcquired');
            const otherNotes = document.getElementById('otherNotes');
            const dimensions
            = document.getElementById('dimensions');
            const weight = document.getElementById('weight');
            const condition = conditionDropdown?.querySelector('.text-wrapper-13')?.textContent || 'Select type';

            itemData = {
              ...itemData,
              dateAcquired: dateAcquired?.value || '',
              otherNotes: otherNotes?.value || '',
              dimensions: dimensions?.value || '',
              weight: weight?.value || '',
              condition,
            };

            const formData = new FormData();
            formData.append('item_id', currentItemId);
            formData.append('dateAcquired', itemData.dateAcquired);
            formData.append('otherNotes', itemData.otherNotes);
            formData.append('dimensions', itemData.dimensions);
            formData.append('weight', itemData.weight);
            formData.append('condition', itemData.condition);

            try {
              const response = await fetch('/upload-item/', {
                method: 'POST',
                body: formData,
                headers: {
                  'X-CSRFToken': getCsrfToken(),
                },
              });
              const result = await response.json();
              if (result.status === 'success') {
                if (detailedInfoModal) detailedInfoModal.style.display = 'none';
                if (previewModal) previewModal.style.display = 'flex';

                const previewName = document.getElementById('previewName');
                const previewDescription = document.getElementById('previewDescription');
                const previewNotes = document.getElementById('previewNotes');
                const previewTradability = document.getElementById('previewTradability');
                const previewYear = document.getElementById('previewYear');
                const previewDimensions = document.getElementById('previewDimensions');
                const previewWeight = document.getElementById('previewWeight');
                const previewCondition = document.getElementById('previewCondition');
                const previewAuthor = document.getElementById('previewAuthor');
                const previewRating = document.getElementById('previewRating');
                const commentCount = document.getElementById('commentCount');

                if (previewName) previewName.textContent = itemData.name;
                if (previewDescription) previewDescription.textContent = itemData.description || 'No description provided';
                if (previewNotes) previewNotes.textContent = itemData.otherNotes || 'No additional notes';
                if (previewTradability) previewTradability.textContent = itemData.tradability === 'Enabled' ? 'Available for trade' : 'Not available for trade';
                if (previewYear) previewYear.textContent = itemData.dateAcquired || 'Not specified';
                if (previewDimensions) previewDimensions.textContent = itemData.dimensions || 'Not specified';
                if (previewWeight) previewWeight.textContent = itemData.weight || 'Not specified';
                if (previewCondition) previewCondition.textContent = itemData.condition !== 'Select type' ? itemData.condition : 'Not specified';
                if (previewAuthor) previewAuthor.textContent = 'Current User';
                if (previewRating) previewRating.textContent = '4.5';
                if (commentCount) commentCount.textContent = '0';

                if (itemData.file) {
                  const previewImage = document.getElementById('previewImage');
                  if (previewImage) {
                    const reader = new FileReader();
                    reader.onload = (e) => {
                      previewImage.src = e.target.result;
                    };
                    reader.readAsDataURL(itemData.file);
                  }
                }
              } else {
                alert('Error: ' + result.message);
              }
            } catch (error) {
              console.error('Error updating item details:', error);
              alert('An error occurred while updating the item details.');
            }
          });
        }

        // Comment submission
        const submitCommentButton = document.querySelector('#previewModal .submit-comment');
        if (submitCommentButton) {
          submitCommentButton.style.cursor = 'pointer';
          submitCommentButton.addEventListener('click', (event) => {
            event.preventDefault();
            const commentInput = document.getElementById('commentInput');
            const comment = commentInput?.value.trim();
            if (comment) {
              commentInput.value = '';
              const commentCount = document.getElementById('commentCount');
              if (commentCount) {
                commentCount.textContent = parseInt(commentCount.textContent) + 1;
              }
              alert('Comment submitted! (Placeholder)');
            } else {
              alert('Please enter a comment.');
            }
          });
        }

        // Back buttons
        const detailedBackButton = document.querySelector('#detailedInfoModal .overlap-group');
        if (detailedBackButton) {
          detailedBackButton.style.cursor = 'pointer';
          detailedBackButton.addEventListener('click', (event) => {
            event.preventDefault();
            if (detailedInfoModal) detailedInfoModal.style.display = 'none';
            if (basicInfoModal) basicInfoModal.style.display = 'flex';
            const itemName = document.getElementById('itemName');
            if (itemName) itemName.focus();

            if (itemData.file) {
              const detailedImage = document.getElementById('detailedImage');
              if (detailedImage) {
                const reader = new FileReader();
                reader.onload = (e) => {
                  detailedImage.src = e.target.result;
                };
                reader.readAsDataURL(itemData.file);
              }
            }
          });
        }

        const previewBackButton = document.querySelector('#previewModal .overlap-group');
        if (previewBackButton) {
          previewBackButton.style.cursor = 'pointer';
          previewBackButton.addEventListener('click', (event) => {
            event.preventDefault();
            if (previewModal) previewModal.style.display = 'none';
            if (detailedInfoModal) detailedInfoModal.style.display = 'flex';
            const dateAcquired = document.getElementById('dateAcquired');
            if (dateAcquired) dateAcquired.focus();

            if (itemData.file) {
              const detailedImage = document.getElementById('detailedImage');
              if (detailedImage) {
                const reader = new FileReader();
                reader.onload = (e) => {
                  detailedImage.src = e.target.result;
                };
                reader.readAsDataURL(itemData.file);
              }
            }
          });
        }

        // Final upload
        const previewNextButton = document.querySelector('#previewModal .overlap');
        if (previewNextButton) {
          previewNextButton.style.cursor = 'pointer';
          previewNextButton.addEventListener('click', async (event) => {
            event.preventDefault();

            const formData = new FormData();
            formData.append('item_id', currentItemId);
            formData.append('final_submit', true);

            try {
              const response = await fetch('/upload-item/', {
                method: 'POST',
                body: formData,
                headers: {
                  'X-CSRFToken': getCsrfToken(),
                },
              });
              const result = await response.json();
              if (result.status === 'success') {
                alert('Item successfully uploaded!');
                if (previewModal) previewModal.style.display = 'none';
                resetForm();
              } else {
                alert('Error: ' + result.message);
              }
            } catch (error) {
              console.error('Error finalizing upload:', error);
              alert('An error occurred while finalizing the upload.');
            }
          });
        }

        // Reset form
        function resetForm() {
          const itemName = document.getElementById('itemName');
          const itemDescription = document.getElementById('itemDescription');
          const dateAcquired = document.getElementById('dateAcquired');
          const otherNotes = document.getElementById('otherNotes');
          const dimensions = document.getElementById('dimensions');
          const weight = document.getElementById('weight');

          if (itemName) itemName.value = '';
          if (itemDescription) itemDescription.value = '';
          if (itemTypeDropdown) {
            const itemTypeText = itemTypeDropdown.querySelector('.text-wrapper-13');
            if (itemTypeText) itemTypeText.textContent = 'Select type';
          }
          if (shelfDropdown) {
            const shelfText = shelfDropdown.querySelector('.text-wrapper-13');
            if (shelfText) shelfText.textContent = 'Select type';
          }
          if (dropZone) {
            dropZone.style.backgroundImage = 'none';
            const pfp = dropZone.querySelector('.pfp');
            const div = dropZone.querySelector('.div');
            const textWrapper3 = dropZone.querySelector('.text-wrapper-3');
            const divWrapper = dropZone.querySelector('.div-wrapper');
            if (pfp) pfp.style.display = 'block';
            if (div) div.style.display = 'block';
            if (textWrapper3) textWrapper3.style.display = 'block';
            if (divWrapper) divWrapper.style.display = 'block';
          }
          tradability = 'Enabled';
          if (tradabilityToggle) {
            const overlap2 = tradabilityToggle.querySelector('.overlap-2');
            const overlap3 = tradabilityToggle.querySelector('.overlap-3');
            const text14 = overlap2?.querySelector('.text-wrapper-14');
            const text15 = overlap3?.querySelector('.text-wrapper-15');
            if (overlap2) overlap2.style.backgroundColor = '#ffd60a';
            if (overlap3) overlap3.style.backgroundColor = '#ffffff';
            if (text14) text14.style.color = '#003566';
            if (text15) text15.style.color = '#b9b9b9';
          }
          if (dateAcquired) dateAcquired.value = '';
          if (otherNotes) otherNotes.value = '';
          if (dimensions) dimensions.value = '';
          if (weight) weight.value = '';
          if (conditionDropdown) {
            const conditionText = conditionDropdown.querySelector('.text-wrapper-13');
            if (conditionText) conditionText.textContent = 'Select type';
          }
          currentItemId = null;
          itemData = {};
          const detailedImage = document.getElementById('detailedImage');
          const previewImage = document.getElementById('previewImage');
          if (detailedImage) detailedImage.src = '{% static "img/item-image-area.png" %}';
          if (previewImage) previewImage.src = '{% static "img/item-image-area.png" %}';
        }

        // Redirect to item details page on post click
        const postClasses = [
          'recommended-4',
          'favorite-1',
          'trade-request-1',
          'trade-request-2',
          'trade-request-3',
          'trade-request-4',
          'showcase-1',
          'showcase-2',
          'showcase-3',
          'showcase-4',
        ];

        postClasses.forEach((className) => {
          const posts = document.querySelectorAll(`.${className}`);
          posts.forEach((post) => {
            post.style.cursor = 'pointer';
            post.addEventListener('click', (event) => {
              event.preventDefault();
              window.location.href = '/item-details/';
            });
          });
        });
      });
    </script>
  </body>
</html>