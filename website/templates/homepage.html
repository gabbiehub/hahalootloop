{% load static %}
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta charset="utf-8" />
    <title>Collector's Hub</title>
    <link rel="stylesheet" href="{% static 'css/globals.css' %}" />
    <link rel="stylesheet" href="{% static 'css/homepage/homepage.css' %}" />
    <link rel="stylesheet" href="{% static 'css/homepage/homepage-modals.css' %}" />
  </head>
  <body>
    {% csrf_token %}
    <div class="home-page">
      <div class="group-18 fixed-top">
        <div class="rectangle-8"></div>
        <div class="overlap-group-wrapper">
          <div class="search-wrapper"><img class="search" src="{% static 'img/homepage/search.png' %}" alt="Search" /></div>
        </div>
      </div>
      <div class="overlap">
        <div class="recommended-4">
          <div class="recommended-4-details">
            <div class="user-name">John Maigue</div>
            <div class="request-type">Trade Request</div>
            <p class="request-date">01 / 01 / 2029</p>
            <p class="request-description">
              This is the missing piece! My vintage typewriter collection won't be complete without it.
            </p>
          </div>
          <img class="recommended-4-image" src="{% static 'img/homepage/sections/recommended 4.png' %}" alt="Recommended 4" />
          <div class="recommended-4-label">Rarity: Mythic</div>
          <img class="recommended-4-rating" src="{% static 'img/homepage/sections/rating.png' %}" alt="Rating" />
          <div class="recommended-4-gradient"></div>
          <div class="recommended-4-circle"></div>
          <img class="john-profile" src="{% static 'img/homepage/sections/john profile.png' %}" alt="John Profile" />
          <img class="recommended-4-forward" src="{% static 'img/homepage/yellow forward.png' %}" alt="Forward" />
        </div>
        <div class="category-antiques">
          <img class="antiques-icon" src="{% static 'img/homepage/antiques.png' %}" alt="Antiques Icon" />
          <div class="category-label">Antiques</div>
        </div>
        <div class="category-figurines">
          <div class="category-label">Figurines</div>
          <img class="figurines-icon" src="{% static 'img/homepage/figurine.png' %}" alt="Figurines Icon" />
        </div>
        <div class="category-books">
          <div class="category-label">Books</div>
          <img class="books-icon" src="{% static 'img/homepage/books.png' %}" alt="Books Icon" />
        </div>
        <div class="category-jewelry">
          <div class="category-label">Jewelry</div>
          <img class="jewelry-icon" src="{% static 'img/homepage/jewelry.png' %}" alt="Jewelry Icon" />
        </div>
        <div class="category-furniture">
          <div class="category-label">Furniture</div>
          <img class="furniture-icon" src="{% static 'img/homepage/furniture.png' %}" alt="Furniture Icon" />
        </div>
        <div class="category-cars">
          <div class="category-label">Cars</div>
          <img class="cars-icon" src="{% static 'img/homepage/cars.png' %}" alt="Cars Icon" />
        </div>
        <div class="category-currency">
          <div class="category-label">Currency</div>
          <img class="currency-icon" src="{% static 'img/homepage/currency.png' %}" alt="Currency Icon" />
        </div>
        <div class="category-toys">
          <div class="category-label">Toys</div>
          <img class="toys-icon" src="{% static 'img/homepage/toys.png' %}" alt="Toys Icon" />
        </div>
        <div class="banner">
          <div class="banner-content">
            <div class="banner-text">
              <div class="banner-title">Gojo Figurine</div>
              <div class="banner-button">Rarity: Legendary</div>
              <div class="banner-description">
                <div class="banner-subtitle">exercitation...</div>
                <p class="banner-body">
                  Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et
                  dolore magna aliqua. Ut enim ad minim veniam, quis nostrud
                </p>
              </div>
            </div>
            <img class="gojo-figurine-banner" src="{% static 'img/homepage/gojo figurine.png' %}" alt="Gojo Figurine Banner" />
          </div>
          <div class="banner-navigation">
            <div class="nav-back"><img class="nav-back-icon" src="{% static 'img/homepage/back.png' %}" alt="Navigation Back" /></div>
            <div class="nav-forward"><img class="nav-forward-icon" src="{% static 'img/homepage/forward.png' %}" alt="Navigation Forward" /></div>
          </div>
        </div>
        <div class="section-title-recommended">Recommended</div>
        <div class="section-title-favorites">Favorites</div>
        <div class="recommended-1">
          <div class="recommended-1-label">Rarity: Common</div>
          <img class="recommended-1-rating" src="{% static 'img/homepage/sections/rating.png' %}" alt="Rating" />
        </div>
        <div class="recommended-2">
          <div class="recommended-2-label">Rarity: Rare</div>
          <img class="recommended-2-rating" src="{% static 'img/homepage/sections/rating.png' %}" alt="Rating" />
        </div>
        <div class="recommended-3">
          <div class="recommended-3-label">Rarity: Legendary</div>
          <img class="recommended-3-rating" src="{% static 'img/homepage/sections/rating.png' %}" alt="Rating" />
        </div>
        <div class="favorite-1">
          <div class="favorite-1-details">
            <img class="mark-profile" src="{% static 'img/homepage/sections/mark profile.png' %}" alt="Mark Profile" />
            <div class="favorite-1-status">Open for Trade</div>
            <p class="favorite-1-date">04 / 05 / 2027</p>
            <div class="favorite-1-text">
              <p class="favorite-1-description">
                Looking to trade my Gojo Pop-Up Parade figure! Opened but in mint condition, comes with the original
                box.
              </p>
              <div class="favorite-1-preference">Prefer to trade</div>
            </div>
            <div class="favorite-1-user"><div class="favorite-1-user-name">Mark Africa</div></div>
            <img class="favorite-1-image" src="{% static 'img/homepage/sections/favorites.png' %}" alt="Favorite 1" />
          </div>
          <div class="favorite-1-label">Rarity: Rare</div>
          <img class="favorite-1-rating" src="{% static 'img/homepage/sections/star.png' %}" alt="Star" />
        </div>
        <div class="favorite-2">
          <img class="add-to-favorites" src="{% static 'img/homepage/plus.png' %}" alt="Add to Favorites" />
          <div class="favorite-2-text">Add to your <br />favorites</div>
        </div>
        <div class="favorite-3">
          <div class="favorite-3-user">Gabriel Imperial</div>
          <div class="favorite-3-type">Trade Request</div>
          <p class="favorite-3-date">02 / 03 / 2029</p>
          <p class="favorite-3-description">
            I've been hunting for this little guy forever! Anyone holding onto one of these?
          </p>
          <img class="gabriel-profile" src="{% static 'img/homepage/sections/gabriel profile.png' %}" alt="Gabriel Profile" />
        </div>
        <div class="favorite-4">
          <div class="favorite-4-user">Kathryn Molaer</div>
          <div class="favorite-4-type">Collection Showcase</div>
          <p class="favorite-4-date">12 / 31 / 2028</p>
          <p class="favorite-4-description">
            Years of searching, countless stories within these pages—my library of treasures is finally complete!
          </p>
          <img class="kathryn-profile" src="{% static 'img/homepage/sections/kathryn profile.png' %}" alt="Kathryn Profile" />
        </div>
        <div class="favorite-5">
          <div class="favorite-5-type">Wishlist</div>
          <p class="favorite-5-date">04 / 05 / 2027</p>
          <p class="favorite-5-description">
            Thinking of getting this beauty for Grandpa—nothing like the classics to bring back golden memories!
          </p>
          <div class="favorite-5-user">Mark Africa</div>
          <img class="mark-profile-2" src="{% static 'img/homepage/sections/mark profile.png' %}" alt="Mark Profile" />
        </div>
        <div class="trade-requests">
          <div class="trade-request-1">
            <div class="trade-request-1-details">
              <div class="trade-request-1-user">John Maigue</div>
              <div class="trade-request-1-type">Trade Request</div>
              <p class="trade-request-1-date">01 / 01 / 2029</p>
              <p class="trade-request-1-description">
                Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nunc in sollicitudin nibh.
              </p>
            </div>
            <img class="trade-request-1-image" src="{% static 'img/homepage/sections/trade requests 1.png' %}" alt="Trade Request 1" />
            <div class="trade-request-1-label">Rarity: Common</div>
            <img class="trade-request-1-rating" src="{% static 'img/homepage/sections/rating.png' %}" alt="Rating" />
            <div class="trade-request-1-gradient"></div>
            <div class="trade-request-1-circle"></div>
            <img class="john-profile-2" src="{% static 'img/homepage/sections/john profile.png' %}" alt="John Profile" />
            <img class="trade-request-1-forward" src="{% static 'img/homepage/yellow forward.png' %}" alt="Forward" />
          </div>
          <div class="trade-request-2">
            <div class="trade-request-2-label">Rarity: Legendary</div>
            <img class="trade-request-2-rating" src="{% static 'img/homepage/sections/rating.png' %}" alt="Rating" />
          </div>
          <div class="trade-request-3">
            <div class="trade-request-3-label">Rarity: Mythic</div>
            <img class="trade-request-3-rating" src="{% static 'img/homepage/sections/rating.png' %}" alt="Rating" />
          </div>
          <div class="trade-request-4">
            <div class="trade-request-4-label">Rarity: Rare</div>
            <img class="trade-request-4-rating" src="{% static 'img/homepage/sections/rating.png' %}" alt="Rating" />
          </div>
          <div class="trade-request-5">
            <div class="trade-request-5-user">Gabriel Imperial</div>
            <div class="trade-request-5-type">Trade Request</div>
            <p class="trade-request-5-date">02 / 03 / 2029</p>
            <p class="trade-request-5-description">
              Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nunc in sollicitudin nibh.
            </p>
            <img class="gabriel-profile-2" src="{% static 'img/homepage/sections/gabriel profile.png' %}" alt="Gabriel Profile" />
          </div>
          <div class="trade-request-6">
            <div class="trade-request-6-user">Kathryn Molaer</div>
            <div class="trade-request-6-type">Trade Request</div>
            <p class="trade-request-6-date">12 / 31 / 2028</p>
            <p class="trade-request-6-description">
              Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nunc in sollicitudin nibh.
            </p>
            <img class="kathryn-profile-2" src="{% static 'img/homepage/sections/kathryn profile.png' %}" alt="Kathryn Profile" />
          </div>
          <div class="trade-request-7">
            <div class="trade-request-7-type">Trade Request</div>
            <p class="trade-request-7-date">04 / 05 / 2027</p>
            <p class="trade-request-7-description">
              Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nunc in sollicitudin nibh.
            </p>
            <div class="trade-request-7-user">Mark Africa</div>
            <img class="mark-profile-3" src="{% static 'img/homepage/sections/mark profile.png' %}" alt="Mark Profile" />
          </div>
        </div>
        <div class="section-title-trade-requests">Trade Requests</div>
        <div class="showcases">
          <div class="showcase-group">
            <div class="showcase-1">
              <div class="showcase-1-details">
                <div class="showcase-1-type">Trade Request</div>
                <p class="showcase-1-date">01 / 01 / 2029</p>
                <p class="showcase-1-description">
                  Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nunc in sollicitudin nibh.
                </p>
                <div class="showcase-1-user">John Maigue</div>
              </div>
              <img class="showcase-1-image" src="{% static 'img/homepage/sections/collection showcase 1.png' %}" alt="Showcase 1" />
              <div class="showcase-1-label">Rarity: Legendary</div>
              <img class="showcase-1-rating" src="{% static 'img/homepage/sections/rating.png' %}" alt="Rating" />
              <div class="showcase-1-gradient"></div>
              <div class="showcase-1-circle"></div>
              <img class="john-profile-3" src="{% static 'img/homepage/sections/john profile.png' %}" alt="John Profile" />
              <img class="showcase-1-forward" src="{% static 'img/homepage/yellow forward.png' %}" alt="Forward" />
            </div>
            <div class="showcase-2">
              <div class="showcase-2-label">Rarity: Common</div>
              <img class="showcase-2-rating" src="{% static 'img/homepage/sections/rating.png' %}" alt="Rating" />
            </div>
            <div class="showcase-3">
              <div class="showcase-3-label">Rarity: Mythic</div>
              <img class="showcase-3-rating" src="{% static 'img/homepage/sections/rating.png' %}" alt="Rating" />
            </div>
            <div class="showcase-4">
              <div class="showcase-4-label">Rarity: Rare</div>
              <img class="showcase-4-rating" src="{% static 'img/homepage/sections/rating.png' %}" alt="Rating" />
            </div>
            <div class="showcase-5">
              <div class="showcase-5-user">Gabriel Imperial</div>
              <div class="showcase-5-type">Showcase</div>
              <p class="showcase-5-date">02 / 03 / 2029</p>
              <p class="showcase-5-description">
                Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nunc in sollicitudin nibh.
              </p>
              <img class="gabriel-profile-3" src="{% static 'img/homepage/sections/gabriel profile.png' %}" alt="Gabriel Profile" />
            </div>
            <div class="showcase-6">
              <div class="showcase-6-user">Kathryn Molaer</div>
              <div class="showcase-6-type">Showcase</div>
              <p class="showcase-6-date">12 / 31 / 2028</p>
              <p class="showcase-6-description">
                Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nunc in sollicitudin nibh.
              </p>
              <img class="kathryn-profile-3" src="{% static 'img/homepage/sections/kathryn profile.png' %}" alt="Kathryn Profile" />
            </div>
            <div class="showcase-7">
              <div class="showcase-7-type">Showcase</div>
              <p class="showcase-7-date">04 / 05 / 2027</p>
              <p class="showcase-7-description">
                Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nunc in sollicitudin nibh.
              </p>
              <div class="showcase-7-user">Mark Africa</div>
              <img class="mark-profile-4" src="{% static 'img/homepage/sections/mark profile.png' %}" alt="Mark Profile" />
            </div>
          </div>
          <div class="section-title-showcases">Collection Showcases</div>
        </div>
      </div>
      <div class="upload-item-label">Upload Item:</div>
      <div class="header">
        <div class="header-button" id="uploadButton">Upload Item</div>
        <div class="search-bar"><img class="search-icon" src="{% static 'img/homepage/search.png' %}" alt="Search Icon" /></div>
      </div>
      <div class="sidebar">
        <div class="sidebar-home">
          <div class="home-highlight home">
            <img src="{% static 'img/homepage/nav bar select.png' %}" alt="Home Highlight" />
          </div>
          <img class="home-icon" src="{% static 'img/homepage/home.png' %}" alt="Home Icon" />
        </div>
        <button class="chat-button" id="chatButton" aria-label="Open chat">
          <img class="chat-icon" src="{% static 'img/homepage/chat room.png' %}" alt="Chat Icon" />
        </button>
        <img class="settings-icon" src="{% static 'img/homepage/settings.png' %}" alt="Settings Icon" />
        <img class="notifications-icon" src="{% static 'img/homepage/notif.png' %}" alt="Notifications Icon" />
        <a href="{% url 'profile' %}">
          <img class="user-profile" src="{% static 'img/homepage/profile.png' %}" alt="User Profile" />
        </a>
      </div>
      <img class="logo" src="{% static 'img/logo 2.png' %}" alt="Logo" />
      <!-- Message Modal -->
      <div class="modal" id="messageModal">
        <div class="modal-content">
          <span class="close-button" id="closeModal">×</span>
          <h2>Messages</h2>
          <div class="chat-list">
            <div class="chat-item">
              <img src="{% static 'img/homepage/sections/john profile.png' %}" alt="John Profile" class="chat-profile" />
              <div class="chat-details">
                <div class="chat-user">John Maigue</div>
                <div class="chat-preview">Hey, still got that Gojo figure?</div>
              </div>
            </div>
            <div class="chat-item">
              <img src="{% static 'img/homepage/sections/mark profile.png' %}" alt="Mark Profile" class="chat-profile" />
              <div class="chat-details">
                <div class="chat-user">Mark Africa</div>
                <div class="chat-preview">Interested in trading for a vintage coin?</div>
              </div>
            </div>
          </div>
          <div class="chat-input">
            <input type="text" placeholder="Type a message..." id="messageInput" />
            <button class="send-button">Send</button>
          </div>
        </div>
      </div>
    </div>
    <!-- Basic Information Modal -->
<div class="modal" id="basicInfoModal">
  <div class="modal-content item-upload-page">
    <span class="close-button" id="closeBasicInfoModal">×</span>
    <div class="overlap">
      <div class="rectangle"></div>
      <div class="text-wrapper">Next</div>
      <img class="up" src="{% static 'img/up.png' %}" alt="Up Arrow" />
    </div>
    <div class="upload-file-group">
      <div class="overlap-group" id="dropZone">
        <img class="pfp" src="{% static 'img/pfp-8-1.png' %}" alt="Upload Icon" />
        <div class="div">
          <p class="drag-drop-to-upload">Drag & drop to upload</p>
          <div class="text-wrapper-2">Files supported: JPG, PNG</div>
        </div>
        <div class="text-wrapper-3">or</div>
        <div class="div-wrapper">
          <input type="file" id="fileInput" class="hidden-file-input" accept="image/jpeg,image/png" />
          <div class="text-wrapper-4" onclick="document.getElementById('fileInput').click()">Upload File</div>
        </div>
      </div>
    </div>
    <img class="line" src="{% static 'img/line-9.svg' %}" alt="Line" />
    <img class="img" src="{% static 'img/line-10.svg' %}" alt="Line" />
    <img class="line-2" src="{% static 'img/line-11.svg' %}" alt="Line" />
    <div class="text-wrapper-5">Basic Information</div>
    <div class="text-wrapper-6">Detailed Information</div>
    <div class="text-wrapper-7">Preview and Uploading</div>
    <div class="text-wrapper-8">Basic Information</div>
    <div class="text-wrapper-9">Name</div>
    <div class="text-wrapper-10">Description</div>
    <div class="text-wrapper-11">Item Type</div>
    <p class="p">Create shelf or add to existing</p>
    <div class="text-wrapper-12">Tradability</div>
    <div class="rectangle-2">
      <input type="text" id="itemName" placeholder="Enter item name" />
    </div>
    <div class="rectangle-3">
      <textarea id="itemDescription" placeholder="Describe your item"></textarea>
    </div>
    <div class="dropdown-menu" id="itemTypeDropdown">
      <div class="text-wrapper-13">Select type</div>
      <img class="vector" src="{% static 'img/vector-14.svg' %}" alt="Dropdown Arrow" />
      <div class="dropdown-options" style="display: none;">
        <div class="option" data-value="Antiques">Antiques</div>
        <div class="option" data-value="Figurines">Figurines</div>
        <div class="option" data-value="Books">Books</div>
        <div class="option" data-value="Jewelry">Jewelry</div>
        <div class="option" data-value="Furniture">Furniture</div>
        <div class="option" data-value="Cars">Cars</div>
        <div class="option" data-value="Currency">Currency</div>
        <div class="option" data-value="Toys">Toys</div>
      </div>
    </div>
    <div class="dropdown-menu-2" id="shelfDropdown">
      <div class="text-wrapper-13">Select type</div>
      <img class="vector" src="{% static 'img/image.svg' %}" alt="Dropdown Arrow" />
      <div class="dropdown-options" style="display: none;">
        <div class="option" data-value="Create New">Create New</div>
        <div class="option" data-value="Existing Shelf 1">Existing Shelf 1</div>
        <div class="option" data-value="Existing Shelf 2">Existing Shelf 2</div>
      </div>
    </div>
    <div class="component" id="tradabilityToggle">
      <div class="overlap-2"><div class="text-wrapper-14">Enabled</div></div>
      <div class="overlap-3"><div class="text-wrapper-15">Disabled</div></div>
    </div>
    <div class="text-wrapper-16">Upload Photo</div>
  </div>
</div>
  <!--UPLOAD MODALS-->
  <!-- Detailed Information Modal -->
  <div class="modal" id="detailedInfoModal" style="display: none;">
    <div class="modal-content item-upload-page">
      <span class="close-button" id="closeDetailedInfoModal">×</span>
      <div class="overlap">
        <div class="rectangle"></div>
        <div class="text-wrapper">Next</div>
        <img class="up" src="{% static 'img/image.png' %}" alt="Up Arrow" />
      </div>
      <div class="overlap-group">
        <div class="rectangle"></div>
        <div class="div">Back</div>
        <img class="img" src="{% static 'img/up.png' %}" alt="Back Arrow" />
      </div>
      <img class="line" src="{% static 'img/line-9.svg' %}" alt="Line" />
      <img class="line-2" src="{% static 'img/line-10.svg' %}" alt="Line" />
      <img class="line-3" src="{% static 'img/line-11.svg' %}" alt="Line" />
      <img class="close-window" src="{% static 'img/close-window.png' %}" alt="Close" />
      <div class="text-wrapper-2">Basic Information</div>
      <div class="text-wrapper-3">Detailed Information</div>
      <div class="text-wrapper-4">Preview and Uploading</div>
      <div class="text-wrapper-5">More Details</div>
      <div class="text-wrapper-6">Date Acquired</div>
      <div class="text-wrapper-7">Other Notes</div>
      <div class="text-wrapper-8">Upload Receipt</div>
      <div class="text-wrapper-9">Dimensions</div>
      <div class="text-wrapper-10">Weight</div>
      <div class="text-wrapper-11">Condition</div>
      <div class="overlap-2">
        <img class="vector" src="{% static 'img/vector-14.svg' %}" alt="Dropdown Arrow" />
        <input type="text" id="dateAcquired" class="text-wrapper-12" placeholder="mm/dd/yyyy" />
      </div>
      <div class="rectangle-2">
        <input type="text" id="otherNotes" placeholder="Enter notes" />
      </div>
      <div class="upload-file-group">
        <div class="overlap-group-2" id="receiptDropZone">
          <img class="pfp" src="{% static 'img/pfp-8-1.png' %}" alt="Upload Icon" />
          <div class="overlap-3">
            <p class="drag-drop-to-upload">Drag & drop to upload</p>
            <div class="text-wrapper-14">Files supported: JPG, PNG</div>
          </div>
          <div class="text-wrapper-15">or</div>
          <div class="div-wrapper">
            <input type="file" id="receiptInput" class="hidden-file-input" accept="image/jpeg,image/png" />
            <div class="text-wrapper-16" onclick="document.getElementById('receiptInput').click()">Upload File</div>
          </div>
        </div>
      </div>
      <div class="rectangle-3">
        <input type="text" id="dimensions" placeholder="Enter dimensions" />
      </div>
      <div class="rectangle-4">
        <input type="text" id="weight" placeholder="Enter weight" />
      </div>
      <div class="dropdown-menu">
        <div class="text-wrapper-13">Select type</div>
        <img class="vector-2" src="{% static 'img/image.svg' %}" alt="Dropdown Arrow" />
        <div class="dropdown-options" style="display: none;">
          <div class="option" data-value="New">New</div>
          <div class="option" data-value="Like New">Like New</div>
          <div class="option" data-value="Used">Used</div>
          <div class="option" data-value="Damaged">Damaged</div>
        </div>
      </div>
    </div>
  </div>
  <!-- Preview and Uploading Modal -->
<div class="modal" id="previewModal" style="display: none;">
  <div class="modal-content item-upload-page">
    <span class="close-button" id="closePreviewModal">×</span>
    <div class="overlap-group">
      <div class="rectangle"></div>
      <div class="div">Back</div>
      <img class="img" src="{% static 'img/up.png' %}" alt="Back Arrow" />
    </div>
    <div class="overlap">
      <div class="rectangle"></div>
      <div class="text-wrapper">Upload</div>
      <img class="up" src="{% static 'img/image.png' %}" alt="Up Arrow" />
    </div>
    <img class="line" src="{% static 'img/line-9.svg' %}" alt="Line" />
    <img class="line-2" src="{% static 'img/line-10.svg' %}" alt="Line" />
    <img class="line-3" src="{% static 'img/line-11.svg' %}" alt="Line" />
    <img class="close-window" src="{% static 'img/close-window.png' %}" alt="Close" />
    <div class="text-wrapper-2">Basic Information</div>
    <div class="text-wrapper-3">Detailed Information</div>
    <div class="text-wrapper-4">Preview and Uploading</div>
    <div class="text-wrapper-5">Preview Your Item</div>
    <!-- Placeholder for preview content -->
    <div class="preview-content">
      <p>Item preview will be displayed here.</p>
    </div>
  </div>
</div>
<script>
  // Get DOM elements for message modal
  const chatButton = document.getElementById('chatButton');
  const messageModal = document.getElementById('messageModal');
  const closeModal = document.getElementById('closeModal');
  const messageInput = document.getElementById('messageInput');

  // Get DOM elements for upload modals
  const uploadButton = document.getElementById('uploadButton');
  const basicInfoModal = document.getElementById('basicInfoModal');
  const detailedInfoModal = document.getElementById('detailedInfoModal');
  const previewModal = document.getElementById('previewModal');
  const closeBasicInfoModal = document.getElementById('closeBasicInfoModal');
  const closeDetailedInfoModal = document.getElementById('closeDetailedInfoModal');
  const closePreviewModal = document.getElementById('closePreviewModal');
  const dropZone = document.getElementById('dropZone');
  const fileInput = document.getElementById('fileInput');
  const receiptDropZone = document.getElementById('receiptDropZone');
  const receiptInput = document.getElementById('receiptInput');
  const itemTypeDropdown = document.getElementById('itemTypeDropdown');
  const shelfDropdown = document.getElementById('shelfDropdown');
  const tradabilityToggle = document.getElementById('tradabilityToggle');
  const conditionDropdown = document.querySelector('#detailedInfoModal .dropdown-menu');
  let tradability = 'Enabled';
  let currentItemId = null;

  // Function to get CSRF token
  function getCsrfToken() {
    return document.querySelector('input[name="csrfmiddlewaretoken"]').value;
  }

  // Toggle message modal
  chatButton.addEventListener('click', (event) => {
    event.preventDefault();
    messageModal.style.display = 'flex';
    messageInput.focus();
  });

  closeModal.addEventListener('click', () => {
    messageModal.style.display = 'none';
  });

  window.addEventListener('click', (event) => {
    if (event.target === messageModal) {
      messageModal.style.display = 'none';
    }
  });

  messageInput.addEventListener('keypress', (event) => {
    if (event.key === 'Enter') {
      event.preventDefault();
      document.querySelector('.send-button').click();
    }
  });

  // Open basic info modal
  uploadButton.addEventListener('click', (event) => {
    event.preventDefault();
    basicInfoModal.style.display = 'flex';
    document.getElementById('itemName').focus();
  });

  // Close modals
  [closeBasicInfoModal, closeDetailedInfoModal, closePreviewModal].forEach(closeButton => {
    closeButton.addEventListener('click', () => {
      basicInfoModal.style.display = 'none';
      detailedInfoModal.style.display = 'none';
      previewModal.style.display = 'none';
      resetForm();
    });
  });

  window.addEventListener('click', (event) => {
    if (event.target === basicInfoModal || event.target === detailedInfoModal || event.target === previewModal) {
      basicInfoModal.style.display = 'none';
      detailedInfoModal.style.display = 'none';
      previewModal.style.display = 'none';
      resetForm();
    }
  });

  // Drag and drop file upload (Basic Info)
  dropZone.addEventListener('dragover', (event) => {
    event.preventDefault();
    dropZone.style.borderColor = '#003566';
  });

  dropZone.addEventListener('dragleave', (event) => {
    event.preventDefault();
    dropZone.style.borderColor = '#003566';
  });

  dropZone.addEventListener('drop', (event) => {
    event.preventDefault();
    dropZone.style.borderColor = '#003566';
    const files = event.dataTransfer.files;
    if (files.length > 0) {
      fileInput.files = files;
      handleFileUpload(files[0], dropZone);
    }
  });

  fileInput.addEventListener('change', (event) => {
    const files = event.target.files;
    if (files.length > 0) {
      handleFileUpload(files[0], dropZone);
    }
  });

  // Drag and drop receipt upload (Detailed Info)
  receiptDropZone.addEventListener('dragover', (event) => {
    event.preventDefault();
    receiptDropZone.style.borderColor = '#003566';
  });

  receiptDropZone.addEventListener('dragleave', (event) => {
    event.preventDefault();
    receiptDropZone.style.borderColor = '#003566';
  });

  receiptDropZone.addEventListener('drop', (event) => {
    event.preventDefault();
    receiptDropZone.style.borderColor = '#003566';
    const files = event.dataTransfer.files;
    if (files.length > 0) {
      receiptInput.files = files;
      handleFileUpload(files[0], receiptDropZone);
    }
  });

  receiptInput.addEventListener('change', (event) => {
    const files = event.target.files;
    if (files.length > 0) {
      handleFileUpload(files[0], receiptDropZone);
    }
  });

  function handleFileUpload(file, dropZoneElement) {
    const validTypes = ['image/jpeg', 'image/png'];
    if (validTypes.includes(file.type)) {
      const reader = new FileReader();
      reader.onload = (e) => {
        dropZoneElement.style.backgroundImage = `url(${e.target.result})`;
        dropZoneElement.style.backgroundSize = 'cover';
        dropZoneElement.style.backgroundPosition = 'center';
      };
      reader.readAsDataURL(file);
    } else {
      alert('Please upload a JPG or PNG file.');
    }
  }

  // Dropdown functionality
  [itemTypeDropdown, shelfDropdown, conditionDropdown].forEach(dropdown => {
    dropdown.addEventListener('click', () => {
      const options = dropdown.querySelector('.dropdown-options');
      options.style.display = options.style.display === 'block' ? 'none' : 'block';
    });
  });

  document.querySelectorAll('.dropdown-options .option').forEach(option => {
    option.addEventListener('click', (e) => {
      const dropdown = e.target.closest('.dropdown-menu, .dropdown-menu-2');
      dropdown.querySelector('.text-wrapper-13').textContent = e.target.textContent;
      dropdown.querySelector('.dropdown-options').style.display = 'none';
    });
  });

  window.addEventListener('click', (event) => {
    if (!event.target.closest('.dropdown-menu') && !event.target.closest('.dropdown-menu-2')) {
      document.querySelectorAll('.dropdown-options').forEach(options => {
        options.style.display = 'none';
      });
    }
  });

  // Tradability toggle
  tradabilityToggle.addEventListener('click', (event) => {
    const overlap2 = tradabilityToggle.querySelector('.overlap-2');
    const overlap3 = tradabilityToggle.querySelector('.overlap-3');
    if (tradability === 'Enabled') {
      overlap2.style.backgroundColor = '#b9b9b9';
      overlap3.style.backgroundColor = '#ffd60a';
      overlap2.querySelector('.text-wrapper-14').style.color = '#b9b9b9';
      overlap3.querySelector('.text-wrapper-15').style.color = '#003566';
      tradability = 'Disabled';
    } else {
      overlap2.style.backgroundColor = '#ffd60a';
      overlap3.style.backgroundColor = '#ffffff';
      overlap2.querySelector('.text-wrapper-14').style.color = '#003566';
      overlap3.querySelector('.text-wrapper-15').style.color = '#b9b9b9';
      tradability = 'Enabled';
    }
  });

  // Reset form function
  function resetForm() {
    document.getElementById('itemName').value = '';
    document.getElementById('itemDescription').value = '';
    itemTypeDropdown.querySelector('.text-wrapper-13').textContent = 'Select type';
    shelfDropdown.querySelector('.text-wrapper-13').textContent = 'Select type';
    dropZone.style.backgroundImage = 'none';
    tradability = 'Enabled';
    tradabilityToggle.querySelector('.overlap-2').style.backgroundColor = '#ffd60a';
    tradabilityToggle.querySelector('.overlap-3').style.backgroundColor = '#ffffff';
    tradabilityToggle.querySelector('.text-wrapper-14').style.color = '#003566';
    tradabilityToggle.querySelector('.text-wrapper-15').style.color = '#b9b9b9';
    document.getElementById('dateAcquired').value = '';
    document.getElementById('otherNotes').value = '';
    receiptDropZone.style.backgroundImage = 'none';
    document.getElementById('dimensions').value = '';
    document.getElementById('weight').value = '';
    conditionDropdown.querySelector('.text-wrapper-13').textContent = 'Select type';
    currentItemId = null;
  }

  // Basic Info submission
  document.querySelector('#basicInfoModal .overlap').addEventListener('click', async (event) => {
    event.preventDefault();
    
    // Collect form data
    const name = document.getElementById('itemName').value.trim();
    const description = document.getElementById('itemDescription').value.trim();
    const itemType = itemTypeDropdown.querySelector('.text-wrapper-13').textContent;
    const shelf = shelfDropdown.querySelector('.text-wrapper-13').textContent;

    // Validate required fields
    if (!name) {
      alert('Please enter the item name.');
      return;
    }
    if (!description) {
      alert('Please enter the item description.');
      return;
    }
    if (itemType === 'Select type') {
      alert('Please select an item type.');
      return;
    }
    if (shelf === 'Select type') {
      alert('Please select a shelf.');
      return;
    }

    const formData = new FormData();
    formData.append('name', name);
    formData.append('description', description);
    formData.append('itemType', itemType);
    formData.append('shelf', shelf);
    formData.append('tradability', tradability);
    if (fileInput.files[0]) formData.append('file', fileInput.files[0]);

    try {
      const response = await fetch("/upload-item/", {
        method: 'POST',
        body: formData,
        headers: {
          'X-CSRFToken': getCsrfToken(),
        },
      });
      const result = await response.json();
      if (result.status === 'success') {
        currentItemId = result.item_id;
        basicInfoModal.style.display = 'none';
        detailedInfoModal.style.display = 'flex';
        document.getElementById('dateAcquired').focus();
      } else {
        alert('Error: ' + result.message);
      }
    } catch (error) {
      console.error('Error uploading item:', error);
      alert('An error occurred while uploading the item: ' + error.message);
    }
  });

  // Detailed Info submission
  document.querySelector('#detailedInfoModal .overlap').addEventListener('click', async (event) => {
    event.preventDefault();
    const formData = new FormData();
    formData.append('item_id', currentItemId);
    formData.append('dateAcquired', document.getElementById('dateAcquired').value);
    formData.append('otherNotes', document.getElementById('otherNotes').value);
    formData.append('dimensions', document.getElementById('dimensions').value);
    formData.append('weight', document.getElementById('weight').value);
    formData.append('condition', conditionDropdown.querySelector('.text-wrapper-13').textContent);
    if (receiptInput.files[0]) formData.append('receipt', receiptInput.files[0]);

    try {
      const response = await fetch("/upload-item/", {
        method: 'POST',
        body: formData,
        headers: {
          'X-CSRFToken': getCsrfToken(),
        },
      });
      const result = await response.json();
      if (result.status === 'success') {
        detailedInfoModal.style.display = 'none';
        previewModal.style.display = 'flex';
      } else {
        alert('Error: ' + result.message);
      }
    } catch (error) {
      console.error('Error updating item details:', error);
      alert('An error occurred while updating the item details: ' + error.message);
    }
  });

  // Back buttons
  document.querySelector('#detailedInfoModal .overlap-group').addEventListener('click', (event) => {
    event.preventDefault();
    detailedInfoModal.style.display = 'none';
    basicInfoModal.style.display = 'flex';
    document.getElementById('itemName').focus();
  });

  document.querySelector('#previewModal .overlap-group').addEventListener('click', (event) => {
    event.preventDefault();
    previewModal.style.display = 'none';
    detailedInfoModal.style.display = 'flex';
    document.getElementById('dateAcquired').focus();
  });

  // Final upload (placeholder for now)
  document.querySelector('#previewModal .overlap').addEventListener('click', (event) => {
    event.preventDefault();
    alert('Item fully uploaded! (Placeholder)');
    previewModal.style.display = 'none';
    resetForm();
  });
</script>
  </body>
</html>